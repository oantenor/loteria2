<!DOCTYPE html>
<html xmlns:th="http://thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">


    <title>Apostas</title>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>


<!--    <script type="text/javascript">-->

<!--        // function abre(){-->
<!--        //     $(window).on('load',function(){-->
<!--        //         $('#myModal2').modal('show');-->
<!--        //         console.log("oioioioi");-->
<!--        //     });-->
<!--        // }-->
<!--        -->
<!--        // $("#btn1").click(function(){-->
<!--        //     alert("The paragraph was clicked.");-->
<!--        // });-->

<!--        // document.getElementById("btn1").onclick = abre();-->

<!--    </script>-->

    <style>
        .login-form {
            width: 340px;
            margin: 50px auto;
            font-size: 15px;
        }

        .login-form form {
            margin-bottom: 15px;
            background: #f7f7f7;
            box-shadow: 0px 2px 2px rgba(0, 0, 0, 0.3);
            padding: 30px;
        }

        .login-form h2 {
            margin: 0 0 15px;
        }
        .form-control, .btn {
            min-height: 38px;
            border-radius: 2px;
        }

        .trigger-btn{
            font-size: 15px;
            font-weight: bold;
        }

        .btn {
            font-size: 15px;
            font-weight: bold;
        }
    </style>

</head>
<body>
<header>
    <!-- Formulario -->
    <div class="login-form">
        <form method="post" >
            <h2 class="text-center">Loteria</h2>
            <div class="form-group">
                <input type="text" class="form-control" name="email" placeholder="Digite o seu email" required="required">
            </div>
            <div class="form-group">
                <button type="submit" class="btn btn-primary btn-block" id="btn1" >Fazer aposta</button>
                <button type="submit" class="btn btn-outline-secondary btn-block" data-toggle="modal" id="btn2">Buscar apostas</button>
            </div>
        </form>

        <!-- Modal da aposta feita -->
        <div id="myModal" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog modal-login">
                <div class="modal-content">
                    <form method="post">
                        <div class="modal-header">
                            <h4 class="modal-title">Seus números são: </h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <span>susahushua</span>
                            <span>kkk</span>
                            <span>auhsauhshau</span>
                        </div>
                    </form>
                </div>
            </div>
        </div>


        <!-- Modal apostas realizadas pelo usuario-->
        <div id="myModal2" class="modal fade" data-bs-backdrop="static" data-bs-keyboard="false">
            <div class="modal-dialog modal-login">
                <div class="modal-content">
                    <form method="post">
                        <div class="modal-header">
                            <h4 class="modal-title">Suas apostas são: </h4>
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        </div>
                        <div class="modal-body">
                            <table class="table table-striped">
                                <thead>
                                <tr>
                                    <th scope="col">Email</th>
                                    <th scope="col">Numeros do bilhete</th>
                                    <th scope="col">Data da aposta</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="aposta : ${apostas}">
                                    <td th:text="${aposta.email}"></td>
                                    <td th:text="${aposta.aposta}"></td>
                                    <td th:text="${aposta.dataAposta}"></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

</header>
<!--<script type="text/javascript">-->
<!--    $(window).after('load',function(){-->
<!--        console.log("aaaaasdas");-->
<!--        $('#myModal2').modal('show');-->
<!--    });-->
<!--    var elemento = document.getElementById("btn1");-->
<!--    var teste = document.readyState;-->
<!--    console.log("teste");-->
<!--    console.log(teste);-->
<!--    if(teste == "loading"){-->
<!--        console.log("yeah");-->
<!--        elemento.onclick = function(){-->
<!--            $(window).after('load',function(){-->
<!--                console.log("aaaaasdas");-->
<!--                $('#myModal2').modal('show');-->
<!--            });-->
<!--        }-->
<!--    }-->
<!--</script>-->
<script type="text/javascript">
    $(window).on('load',function(){
        let searchParams = new URLSearchParams(window.location.search)
        if(searchParams.has('modal')){
            $('#myModal2').modal('show');
            window.history.pushState(null, null, window.location.pathname);
        }
    });
</script>
</body>
</html>